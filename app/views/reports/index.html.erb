<% content_for :title, "Lost Pet Reports - Pet Registry" %>

<div class="mx-auto p-4" data-testid="reports-index">
  <div class="flex flex-col gap-4">
    <%= render Reports::SearchPanelComponent.new(
          filters: @filters,
          remember_filters: true
        ) %>

    <%= turbo_frame_tag "reports_list" do %>
      <div id="flash_messages">
        <% if flash[:alert].present? %>
          <%= render Ui::ToastComponent.new(type: :error, message: flash[:alert]) %>
        <% end %>
      </div>

      <% if @pagy.count > 0 %>
        <div class="mb-4">
          <%= render Ui::PaginationComponent.new(pagy: @pagy, turbo_frame: "reports_list") %>
        </div>
      <% end %>

      <% if @reports.any? %>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
          <% @reports.each do |report| %>
            <%= render Reports::CardComponent.new(
                  report: report,
                  current_page: @pagy.page,
                  current_query: @filters[:query]
                ) %>
          <% end %>
        </div>

        <% if @pagy.count > 0 %>
          <div class="mt-6">
            <%= render Ui::PaginationComponent.new(pagy: @pagy, turbo_frame: "reports_list") %>
          </div>
        <% end %>
      <% else %>
        <div class="text-center py-12">
          <div class="text-gray-400 dark:text-gray-500 mb-4">
            <svg class="mx-auto h-16 w-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100 mb-2">No reports found</h3>
          <p class="text-gray-600 dark:text-gray-400">
            Try adjusting your search filters or search terms.
          </p>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
